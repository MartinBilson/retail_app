<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Mobile Specific Meta -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon-->
    <link rel="shortcut icon" href="<%= static_path(@conn, "/images/fav.ico") %>">
    <!-- Author Meta -->
    <meta name="author" content="CS Digital">
    <!-- Meta Description -->
    <meta name="description" content="">
    <!-- Meta Keyword -->
    <meta name="keywords" content="">
    <!-- meta character set -->
    <meta charset="UTF-8">

    <title>Thamani online</title>

     <!-- example for Phoenix.HTML 2.7.1+ -->
     <link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
   <!-- example for Phoenix.HTML 2.7.0 and below-->
     <style>
          .loader-show {
            border: 16px solid #f3f3f3;
            border-top: 16px solid #ffd700;
            border-right: 16px solid #ef001d;
            border-bottom: 16px solid #00bf48;
            border-radius: 50%;
            margin-top: 30px;
            width: 20px;
            height: 20px;
            -webkit-animation: spin 2s linear ; /* Safari */
            animation: spin 2s linear ;
          }
           .dt-button, .buttons-print {
            margin-left:-170px;
          }
          .buttons-html5 {
           margin-left:0px;
         }


          .loader-hide {
            display:none;
          }
          /* Safari */
          @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
          }

          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }


          #header{
          	height:92px;
          	background:gold ;
          	border-bottom:1px solid #eee;
          }
          #header ul{padding:33px 0 0 45px;}
          #header li{
          	list-style:none;
          	float:left;
          	margin-right:30px;
          }
          #header li a{
          	font-weight:700;
          	color:#333;
          	font-size:14px;
          	text-decoration:none;
          	text-transform:uppercase;
          	letter-spacing:1px;
          }
          #headerli a:hover{
          	color:#000;
          	cursor:pointer;
          }

        /* style for add to cart   */
    a.add-to-cart {
    	width: 216px;
    	height: 48px;
    	background: #ffab00;
    	font-size: 18px;
    	line-height: 48px;
    	letter-spacing: 2px;
    	color: rgb(255, 255, 255);
    	text-transform: uppercase;
    	-moz-border-radius: 24px;
    	-webkit-border-radius: 24px;
    	border-radius: 24px;
    	text-decoration: none;
    	text-align: center;
    	left: 24px;
    	position: absolute;
    	top: 48px;
    	display: block;
    	box-shadow: 0 3px 6px rgba(255, 171, 0, 0.16), 0 3px 6px rgba(255, 171, 0, 0.23);
    	-moz-box-shadow: 0 3px 6px rgba(255, 171, 0, 0.16), 0 3px 6px rgba(255, 171, 0, 0.23);
    	-webkit-box-shadow: 0 3px 6px rgba(255, 171, 0, 0.16), 0 3px 6px rgba(255, 171, 0, 0.23);
    }

    a.add-to-cart.size {
    	width: 48px;
    	left: 108px;
    	font-size: 0;
    	color: #e7bb45;
    	letter-spacing: 0;
    	-webkit-transition: .2s linear;
    	-moz-transition: .2s linear;
    	-ms-transition: .2s linear;
    	-o-transition: .2s linear;
    	transition: .2s linear;
    }

    a.add-to-cart.hover {
    	-webkit-transition: .2s linear;
    	-moz-transition: .2s linear;
    	-ms-transition: .2s linear;
    	-o-transition: .2s linear;
    	transition: .2s linear;
    	-webkit-transform: rotate(180deg);
    	-moz-transform: rotate(180deg);
    	-ms-transform: rotate(180deg);
    	-o-transform: rotate(180deg);
    	transform: rotate(180deg);
    	-webkit-transform-origin: 108px 24px;
    	-moz-transform-origin: 108px 24px;
    	-o-transform-origin: 108px 24px;
    	-ms-transform-origin: 108px 24px;
    	transform-origin: 108px 24px;
    }

    a.cart {
    	width: 72px;
    	height: 72px;
    	-moz-border-radius: 36px;
    	-webkit-border-radius: 36px;
    	border-radius: 36px;
    	font-size: 18px;
    	text-align: center;
    	color: #616161;
    	text-decoration: none;
    	position: absolute;
    	right: 24px;
    	top: 36px;
    	display: block;
    	background: #535558 url(http://images.vfl.ru/ii/1484930184/14435803/15757225.png
    ) center no-repeat;
    	background-size: 36px;
    	box-shadow: 0 3px 6px rgba(97, 97, 97 0.16), 0 3px 6px rgba(97, 97, 97 0.23);
    	-moz-box-shadow: 0 3px 6px rgba(97, 97, 97 0.16), 0 3px 6px rgba(97, 97, 97 0.23);
    	-webkit-box-shadow: 0 3px 6px rgba(97, 97, 97 0.16), 0 3px 6px rgba(97, 97, 97 0.23);
    }

    a.cart > span {
    	width: 24px;
    	height: 24px;
    	font-size: 16px;
    	color: #fff;
    	line-height: 24px;
    	position: absolute;
    	-moz-border-radius: 12px;
    	-webkit-border-radius: 12px;
    	border-radius: 12px;
    	display: block;
    	transform: scale(0);
    	-o-transform: scale(0);
    	-ms-transform: scale(0);
    	-moz-transform: scale(0);
    	-webkit-transform: scale(0);
    	top: 0;
    	right: 0;
    	bottom: 0;
    	left: 0;
    	margin: auto;
    	background: #ffab00;
    	box-shadow: 0 3px 6px rgba(255, 171, 0, 0.16), 0 3px 6px rgba(255, 171, 0, 0.23);
    	-moz-box-shadow: 0 3px 6px rgba(255, 171, 0, 0.16), 0 3px 6px rgba(255, 171, 0, 0.23);
    	-webkit-box-shadow: 0 3px 6px rgba(255, 171, 0, 0.16), 0 3px 6px rgba(255, 171, 0, 0.23);
    }

    a.cart > span.counter {
    	left: 48px;
    	bottom: 48px;
    	-webkit-transition: .2s linear;
    	-moz-transition: .2s linear;
    	-ms-transition: .2s linear;
    	-o-transition: .2s linear;
    	transition: .2s linear;
    	transform: scale(1);
    	-o-transform: scale(1);
    	-ms-transform: scale(1);
    	-moz-transform: scale(1);
    	-webkit-transform: scale(1);
    }

    .product-image {
  float: left;
  width: 20%;
}

.product-details {
  float: left;
  width: 37%;
}

.product-price {
  float: left;
  width: 12%;
}

.product-quantity {
  float: left;
  width: 10%;
}

.product-removal {
  float: left;
  width: 9%;
}

.product-line-price {
  float: left;
  width: 12%;
  text-align: right;
}

/* This is used as the traditional .clearfix class */
.group:before, .shopping-cart:before, .column-labels:before, .product:before, .totals-item:before,
.group:after,
.shopping-cart:after,
.column-labels:after,
.product:after,
.totals-item:after {
  content: '';
  display: table;
}

.group:after, .shopping-cart:after, .column-labels:after, .product:after, .totals-item:after {
  clear: both;
}

.group, .shopping-cart, .column-labels, .product, .totals-item {
  zoom: 1;
}

/* Apply clearfix in a few places */
/* Apply dollar signs */
.product .product-price:before, .product .product-line-price:before, .totals-value:before {
  content: '$';
}


.shopping-cart {
  margin-top: -45px;
}

/* Column headers */
.column-labels label {
  padding-bottom: 15px;
  margin-bottom: 15px;
  border-bottom: 1px solid #eee;
}
.column-labels .product-image, .column-labels .product-details, .column-labels .product-removal {
  text-indent: -9999px;
}

/* Product entries */
.products {
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 1px solid #eee;
}
.products .product-image {
  text-align: center;
}
.products .product-image img {
  width: 100px;
}
.products .product-details .product-title {
  margin-right: 20px;
  font-family: "HelveticaNeue-Medium", "Helvetica Neue Medium";
}
.products .product-details .product-description {
  margin: 5px 20px 5px 0;
  line-height: 1.4em;
}
.products .product-quantity input {
  width: 40px;
}
.products .remove-product {
  border: 0;
  padding: 4px 8px;
  background-color: #c66;
  color: #fff;
  font-family: "HelveticaNeue-Medium", "Helvetica Neue Medium";
  font-size: 12px;
  border-radius: 3px;
}
.products .remove-product:hover {
  background-color: #a44;
}

/* Totals section */
.totals .totals-item {
  float: right;
  clear: both;
  width: 100%;
  margin-bottom: 10px;
}
.totals .totals-item label {
  float: left;
  clear: both;
  width: 79%;
  text-align: right;
}
.totals .totals-item .totals-value {
  float: right;
  width: 21%;
  text-align: right;
}
.totals .totals-item-total {
  font-family: "HelveticaNeue-Medium", "Helvetica Neue Medium";
}

.checkout {
  float: right;
  border: 0;
  margin-top: 20px;
  padding: 6px 25px;
  background-color: #6b6;
  color: #fff;
  font-size: 25px;
  border-radius: 3px;
}

.checkout:hover {
  background-color: #494;
}

/* Make adjustments for tablet */
@media screen and (max-width: 650px) {
  .shopping-cart {
    margin: 0;
    padding-top: 20px;
    border-top: 1px solid #eee;
  }

  .column-labels {
    display: none;
  }

  .product-image {
    float: right;
    width: auto;
  }
  .product-image img {
    margin: 0 0 10px 10px;
  }

  .product-details {
    float: none;
    margin-bottom: 10px;
    width: auto;
  }

  .product-price {
    clear: both;
    width: 70px;
  }

  .product-quantity {
    width: 100px;
  }
  .product-quantity input {
    margin-left: 20px;
  }

  .product-quantity:before {
    content: 'x';
  }

  .product-removal {
    width: auto;
  }

  .product-line-price {
    float: right;
    width: 70px;
  }
}
/* Make more adjustments for phone */
@media screen and (max-width: 350px) {
  .product-removal {
    float: right;
  }

  .product-line-price {
    float: right;
    clear: left;
    width: auto;
    margin-top: 10px;
  }

  .products .product-line-price:before {
    content: 'Item Total: $';
  }

  .totals .totals-item label {
    width: 60%;
  }
  .totals .totals-item .totals-value {
    width: 40%;
  }
}




    </style>


    <!-- <link rel="stylesheet" href="<%= static_path(@conn, "/css/font-awesome/css/font-awesome.min.css") %>"> -->
    <link rel="stylesheet" href="<%= static_path(@conn, "/css/material-dashboard.css?v=1.2.0")   %>">
      <link rel="stylesheet" href="<%= static_path(@conn, "/css/bootstrap.min.css")   %>">
      <link rel="stylesheet" href="<%= static_path(@conn, "/css/commerce.css")   %>">

    <script language="javascript" type="text/javascript">


    function timeMsg(){

    	window.setTimeout("clearMsg()",5000);//10secs

    }

    //

    function clearMsg(){

    	document.getElementById("hideMsg").innerHTML = "";

    }
</script>

  </head>

  <body onLoad = "timeMsg()">
    <div id="wrapper">


    <div id="checkout">
    	CHECKOUT
    </div>

    <div id="info">
      some details here
    </div>

    <div id="header" style="position: fixed;width: 100%;z-index: 10;">

    	            <img  style="width:300px;margin:auto;padding: 20px;"  alt="Thamani" src ="<%= static_path(@conn, "/images/thamani_logo.png") %>">
    </div>




<div class="container" style="width:auto">

  <div id ="hideMsg">

  <p class="alert alert-info" role="alert"><%= get_flash(@conn, :info) %></p>
  <p class="alert alert-danger" role="alert"><%= get_flash(@conn, :error) %></p>

</div>
  <main role="main">
    <%= render @view_module, @view_template, assigns %>
  </main>

</div>


</div>

    <script src="<%= static_path(@conn, "/js/app.js") %>"></script>
      <%= Drab.Client.run(@conn) %>
    <!--   Core JS Files   -->
<script src="<%= static_path(@conn, "/js/jquery-3.2.1.min.js") %>"></script>
<script src="<%= static_path(@conn, "/js/jquery.spinner.js" ) %>"></script>
<script src="<%= static_path(@conn, "/js/bootstrap.min.js" ) %>"></script>
<script src="<%= static_path(@conn, "/js/material.min.js" ) %>"></script>
<script src="<%= static_path(@conn, "/js/perfect-scrollbar.jquery.min.js" ) %>"></script>
<script src="<%= static_path(@conn, "/js/arrive.min.js" ) %>"></script>
<script src="<%= static_path(@conn, "/js/jquery.bootstrap-wizard.js" ) %>"></script>
<script src="<%= static_path(@conn, "/js/jquery.tagsinput.js" ) %>"></script>
<script src="<%= static_path(@conn, "/js/jasny-bootstrap.min.js" ) %>"></script>
<script src="<%= static_path(@conn, "/js/jquery.validate.min.js" ) %>"></script>
<script src="<%= static_path(@conn, "/js/material-dashboard.js?v=1.2.1" ) %>"></script>

<script type="text/javascript">

$(document).ready(function(){

	$(".largeGrid").click(function(){
    $(this).find('a').addClass('active');
    $('.smallGrid a').removeClass('active');

    $('.product').addClass('large').each(function(){
		});
		setTimeout(function(){
			$('.info-large').show();
		}, 200);
		setTimeout(function(){

			$('.view_gallery').trigger("click");
		}, 400);

		return false;
	});

	$(".smallGrid").click(function(){
    $(this).find('a').addClass('active');
    $('.largeGrid a').removeClass('active');

		$('div.product').removeClass('large');
		$(".make3D").removeClass('animate');
    $('.info-large').fadeOut("fast");
		setTimeout(function(){
				$('div.flip-back').trigger("click");
		}, 400);
		return false;
	});

	$(".smallGrid").click(function(){
		$('.product').removeClass('large');
		return false;
	});

  $('.colors-large a').click(function(){return false;});


	$('.product').each(function(i, el){

		// Lift card and show stats on Mouseover
		$(el).find('.make3D').hover(function(){
				$(this).parent().css('z-index', "20");
				$(this).addClass('animate');
				$(this).find('div.carouselNext, div.carouselPrev').addClass('visible');
			 }, function(){
				$(this).removeClass('animate');
				$(this).parent().css('z-index', "1");
				$(this).find('div.carouselNext, div.carouselPrev').removeClass('visible');
		});

		// Flip card to the back side
		$(el).find('.view_gallery').click(function(){

			$(el).find('div.carouselNext, div.carouselPrev').removeClass('visible');
			$(el).find('.make3D').addClass('flip-10');
			setTimeout(function(){
			$(el).find('.make3D').removeClass('flip-10').addClass('flip90').find('div.shadow').show().fadeTo( 80 , 1, function(){
					$(el).find('.product-front, .product-front div.shadow').hide();
				});
			}, 50);

			setTimeout(function(){
				$(el).find('.make3D').removeClass('flip90').addClass('flip190');
				$(el).find('.product-back').show().find('div.shadow').show().fadeTo( 90 , 0);
				setTimeout(function(){
					$(el).find('.make3D').removeClass('flip190').addClass('flip180').find('div.shadow').hide();
					setTimeout(function(){
						$(el).find('.make3D').css('transition', '100ms ease-out');
						$(el).find('.cx, .cy').addClass('s1');
						setTimeout(function(){$(el).find('.cx, .cy').addClass('s2');}, 100);
						setTimeout(function(){$(el).find('.cx, .cy').addClass('s3');}, 200);
						$(el).find('div.carouselNext, div.carouselPrev').addClass('visible');
					}, 100);
				}, 100);
			}, 150);
		});

		// Flip card back to the front side
		$(el).find('.flip-back').click(function(){

			$(el).find('.make3D').removeClass('flip180').addClass('flip190');
			setTimeout(function(){
				$(el).find('.make3D').removeClass('flip190').addClass('flip90');

				$(el).find('.product-back div.shadow').css('opacity', 0).fadeTo( 100 , 1, function(){
					$(el).find('.product-back, .product-back div.shadow').hide();
					$(el).find('.product-front, .product-front div.shadow').show();
				});
			}, 50);

			setTimeout(function(){
				$(el).find('.make3D').removeClass('flip90').addClass('flip-10');
				$(el).find('.product-front div.shadow').show().fadeTo( 100 , 0);
				setTimeout(function(){
					$(el).find('.product-front div.shadow').hide();
					$(el).find('.make3D').removeClass('flip-10').css('transition', '100ms ease-out');
					$(el).find('.cx, .cy').removeClass('s1 s2 s3');
				}, 100);
			}, 150);

		});

		makeCarousel(el);
	});

	$('.add-cart-large').each(function(i, el){
		$(el).click(function(){
			var carousel = $(this).parent().parent().find(".carousel-container");
			var img = carousel.find('img').eq(carousel.attr("rel"))[0];
			var position = $(img).offset();

			var productName = $(this).parent().find('h4').get(0).innerHTML;
      	var price = $(this).parent().find('.price-big').get(0).innerHTML;

			$("body").append('<div class="floating-cart"></div>');
			var cart = $('div.floating-cart');
			$("<img src='"+img.src+"' class='floating-image-large' />").appendTo(cart);

			$(cart).css({'top' : position.top + 'px', "left" : position.left + 'px'}).fadeIn("slow").addClass('moveToCart');
			setTimeout(function(){$("body").addClass("MakeFloatingCart");}, 800);

			setTimeout(function(){
			$('div.floating-cart').remove();
			$("body").removeClass("MakeFloatingCart");


			var cartItem = "<div class='cart-item'><div class='img-wrap'><img src='"+img.src+"' alt='' /></div><span>"+productName+"</span><strong>"+price+"</strong><div class='cart-item-border'></div><div class='delete-item'></div></div>";

			$("#cart .empty").hide();
			$("#cart").append(cartItem);
			$("#checkout").fadeIn(500);

			$("#cart .cart-item").last()
				.addClass("flash")
				.find(".delete-item").click(function(){
					$(this).parent().fadeOut(300, function(){
						$(this).remove();
						if($("#cart .cart-item").size() == 0){
							$("#cart .empty").fadeIn(500);
							$("#checkout").fadeOut(500);
						}
					})
				});
 		    setTimeout(function(){
				$("#cart .cart-item").last().removeClass("flash");
			}, 10 );

		}, 1000);


		});
	})

	/* ----  Image Gallery Carousel   ---- */
	function makeCarousel(el){


		var carousel = $(el).find('.carousel ul');
		var carouselSlideWidth = 315;
		var carouselWidth = 0;
		var isAnimating = false;
		var currSlide = 0;
		$(carousel).attr('rel', currSlide);

		// building the width of the casousel
		$(carousel).find('li').each(function(){
			carouselWidth += carouselSlideWidth;
		});
		$(carousel).css('width', carouselWidth);

		// Load Next Image
		$(el).find('div.carouselNext').on('click', function(){
			var currentLeft = Math.abs(parseInt($(carousel).css("left")));
			var newLeft = currentLeft + carouselSlideWidth;
			if(newLeft == carouselWidth || isAnimating === true){return;}
			$(carousel).css({'left': "-" + newLeft + "px",
								   "transition": "300ms ease-out"
								 });
			isAnimating = true;
			currSlide++;
			$(carousel).attr('rel', currSlide);
			setTimeout(function(){isAnimating = false;}, 300);
		});

		// Load Previous Image
		$(el).find('div.carouselPrev').on('click', function(){
			var currentLeft = Math.abs(parseInt($(carousel).css("left")));
			var newLeft = currentLeft - carouselSlideWidth;
			if(newLeft < 0  || isAnimating === true){return;}
			$(carousel).css({'left': "-" + newLeft + "px",
								   "transition": "300ms ease-out"
								 });
			isAnimating = true;
			currSlide--;
			$(carousel).attr('rel', currSlide);
			setTimeout(function(){isAnimating = false;}, 300);
		});
	}

	$('.sizes a span, .categories a span').each(function(i, el){
		$(el).append('<span class="x"></span><span class="y"></span>');

		$(el).parent().on('click', function(){
			if($(this).hasClass('checked')){
				$(el).find('.y').removeClass('animate');
				setTimeout(function(){
					$(el).find('.x').removeClass('animate');
				}, 50);
				$(this).removeClass('checked');
				return false;
			}

			$(el).find('.x').addClass('animate');
			setTimeout(function(){
				$(el).find('.y').addClass('animate');
			}, 100);
			$(this).addClass('checked');
			return false;
		});
	});

	$('.add-to_cart').click(function(){
		var productCard = $(this).parent();
		var position = productCard.offset();
		var productImage = $(productCard).find('img').get(0).src;
		var productName = $(productCard).find('.product_name').get(0).innerHTML;

		$("body").append('<div class="floating-cart"></div>');
		var cart = $('div.floating-cart');
		productCard.clone().appendTo(cart);
		$(cart).css({'top' : position.top + 'px', "left" : position.left + 'px'}).fadeIn("slow").addClass('moveToCart');
		setTimeout(function(){$("body").addClass("MakeFloatingCart");}, 800);
		setTimeout(function(){
			$('div.floating-cart').remove();
			$("body").removeClass("MakeFloatingCart");


			var cartItem = "<div class='cart-item'><div class='img-wrap'><img src='"+productImage+"' alt='' /></div><span>"+productName+"</span><strong>$39</strong><div class='cart-item-border'></div><div class='delete-item'></div></div>";

			$("#cart .empty").hide();
			$("#cart").append(cartItem);
			$("#checkout").fadeIn(500);

			$("#cart .cart-item").last()
				.addClass("flash")
				.find(".delete-item").click(function(){
					$(this).parent().fadeOut(300, function(){
						$(this).remove();
						if($("#cart .cart-item").size() == 0){
							$("#cart .empty").fadeIn(500);
							$("#checkout").fadeOut(500);
						}
					})
				});
 		    setTimeout(function(){
				$("#cart .cart-item").last().removeClass("flash");
			}, 10 );

		}, 1000);
	});
});



$(document).ready(function () {

    $.ajax({
        url: "http://localhost:8000/commerce/status",
        method: "POST",
        dataType : "json",   //you may use jsonp for cross origin request
        crossDomain:true,
        success: function(data) {

          console.log(data)
           if (data.response == "true") {


               $("a.cart > span").addClass("counter");
               $("a.cart > span.counter").text(data.count);



           } else {

             $("a.cart > span").addClass("counter");
             $("a.cart > span.counter").text(data.count);



           }




       }

     })

   });


function AddToCart(prodid) {


  const multi_url = "http://localhost:8000/commerce/cart";
  var user = <%= @current_user.id %>
  var count = 0;

  $(document).ready(function () {

      $.ajax({
          url: multi_url,
          method: "POST",
          dataType : "json",   //you may use jsonp for cross origin request
          data: {id: prodid ,status: "Active",qty: 1, user: user },
          crossDomain:true,
          success: function(data) {

            console.log(data)
             if (data.response == "true") {


                 $("a.cart > span").addClass("counter");
                 $("a.cart > span.counter").text(data.count);

               alert(data.message);

             } else {

               $("a.cart > span").addClass("counter");
               $("a.cart > span.counter").text(data.count);

               alert(data.message);

             }




         }

       })

     });

}
</script>

  </body>
</html>
